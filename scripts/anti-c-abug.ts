// 원본 코드 : var _0x2f5b=["\x75\x73\x65\x20\x73\x74\x72\x69\x63\x74","\x5F\x5F\x65\x73\x4D\x6F\x64\x75\x6C\x65","\x64\x65\x66\x69\x6E\x65\x50\x72\x6F\x70\x65\x72\x74\x79","\x62\x64\x73\x78\x2F\x62\x64\x73\x2F\x61\x63\x74\x6F\x72","\x62\x64\x73\x78\x2F\x62\x64\x73\x2F\x62\x6C\x6F\x63\x6B\x70\x6F\x73","\x62\x64\x73\x78\x2F\x62\x64\x73\x2F\x70\x6C\x61\x79\x65\x72","\x62\x64\x73\x78\x2F\x63\x6F\x6D\x6D\x6F\x6E","\x62\x64\x73\x78\x2F\x65\x76\x65\x6E\x74","\x62\x64\x73\x78\x2F\x6E\x61\x74\x69\x76\x65\x74\x79\x70\x65","\x62\x64\x73\x78\x2F\x70\x72\x6F\x63\x68\x61\x63\x6B\x65\x72","\x65\x66\x66\x65\x63\x74\x20\x40\x73\x20\x72\x65\x73\x69\x73\x74\x61\x6E\x63\x65\x20\x31\x20\x32\x35\x35\x20\x74\x72\x75\x65","\x72\x75\x6E\x43\x6F\x6D\x6D\x61\x6E\x64","\x3F\x74\x65\x6C\x65\x70\x6F\x72\x74\x54\x6F\x40\x50\x6C\x61\x79\x65\x72\x40\x40\x55\x45\x41\x41\x58\x41\x45\x42\x56\x56\x65\x63\x33\x40\x40\x5F\x4E\x48\x48\x31\x40\x5A","\x76\x6F\x69\x64\x5F\x74","\x68\x6F\x6F\x6B\x69\x6E\x67","\x70\x72\x6F\x63\x48\x61\x63\x6B\x65\x72","\x64\x61\x6D\x61\x67\x65","\x63\x61\x75\x73\x65","\x64\x61\x6D\x61\x67\x65\x53\x6F\x75\x72\x63\x65","\x46\x61\x6C\x6C","\x41\x63\x74\x6F\x72\x44\x61\x6D\x61\x67\x65\x43\x61\x75\x73\x65","\x43\x41\x4E\x43\x45\x4C","\x6F\x6E","\x65\x6E\x74\x69\x74\x79\x48\x75\x72\x74","\x65\x76\x65\x6E\x74\x73"];_0x2f5b[0];Object[_0x2f5b[2]](exports,_0x2f5b[1],{value:true});const actor_1=require(_0x2f5b[3]);const blockpos_1=require(_0x2f5b[4]);const player_1=require(_0x2f5b[5]);const common_1=require(_0x2f5b[6]);const event_1=require(_0x2f5b[7]);const nativetype_1=require(_0x2f5b[8]);const prochacker_1=require(_0x2f5b[9]);const hasTeleport=prochacker_1[_0x2f5b[15]][_0x2f5b[14]](_0x2f5b[12],nativetype_1[_0x2f5b[13]],null,player_1.ServerPlayer,blockpos_1.Vec3)((_0xba5bx9,_0xba5bxa)=>{_0xba5bx9[_0x2f5b[11]](_0x2f5b[10]);return hasTeleport(_0xba5bx9,_0xba5bxa)});event_1[_0x2f5b[24]][_0x2f5b[23]][_0x2f5b[22]](async (ev)=>{if(ev[_0x2f5b[16]]< 1.000000001){if(ev[_0x2f5b[18]][_0x2f5b[17]]=== actor_1[_0x2f5b[20]][_0x2f5b[19]]){return common_1[_0x2f5b[21]]}}})

import { ActorDamageCause } from "bdsx/bds/actor";
import { Vec3 } from "bdsx/bds/blockpos";
import { ServerPlayer } from "bdsx/bds/player";
import { CANCEL } from "bdsx/common";
import { events } from "bdsx/event";
import { void_t } from "bdsx/nativetype";
import { procHacker } from "bdsx/prochacker";

const hasTeleport = procHacker.hooking('?teleportTo@Player@@UEAAXAEBVVec3@@_NHH1@Z', void_t, null, ServerPlayer, Vec3)((actor, backpos) => {
    actor.runCommand('effect @s resistance 1 255 true');
    return hasTeleport(actor, backpos)
});

events.entityHurt.on((ev) => {
    if (ev.damage < 1.000000001) {
        if (ev.damageSource.cause === ActorDamageCause.Fall) {
            return CANCEL
        }
    }
})